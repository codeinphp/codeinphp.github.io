<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="BloggerCMS" />
    <meta name="description" content="PHP and more...">
    <meta name="author" content="Sarfraz Ahmed">

    <title>Code In PHP</title>

    <!-- rss feed url -->
    <link rel="alternate" type="application/rss+xml" title="Code In PHP" href="https://codeinphp.github.io/rss.xml"/>

    <!-- favicon -->
    <link rel="shortcut icon" href="/favicon.ico"/>
    <link rel="shortcut icon" href="https://codeinphp.github.io/favicon.ico"/>

    <!-- Bootstrap CSS file -->
    <link href="https://codeinphp.github.io/js/plugins/bootstrap-3.0.3/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://codeinphp.github.io/js/plugins/font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://codeinphp.github.io/js/plugins/bootstrap-3.0.3/plugins/social-buttons.css" rel="stylesheet"/>

    <!-- syntax highlighter css file -->
    <link href="https://codeinphp.github.io/js/plugins/highlight/styles/php.css" rel="stylesheet"/>

    <!-- lightbox for images -->
    <link href="https://codeinphp.github.io/js/plugins/lightbox/ekko-lightbox.min.css" rel="stylesheet"/>

    <!-- blog custom CSS file -->
    <link href="https://codeinphp.github.io/css/style.css" rel="stylesheet"/>
</head><body>
<!-- Header -->
<header class="navbar navbar-default
 navbar-fixed-top bs-docs-nav" role="banner">
    <div class="container">

        <div class="navbar-header">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a href="https://codeinphp.github.io" class="navbar-brand"><i class="fa fa-code"></i> Code In PHP</a>
        </div>

        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
            <div class="navbar-form navbar-right" role="search">
                <div class="form-group">
                    <input type="text" class="searchQuery form-control" placeholder="Search Posts">
                </div>

                <button type="button" class="searchButton btn btn-default"><i class="glyphicon glyphicon-search"></i>
                    Submit
                </button>
            </div>

            <ul class="nav navbar-nav page-links">
                    <li><a href="https://codeinphp.github.io/page/about">About</a></li>
                    <li><a href="https://codeinphp.github.io/page/projects">Projects</a></li>
                    <li><a href="https://codeinphp.github.io/page/contact">Contact</a></li>
            </ul>

        </nav>
    </div>
</header>
<div class="container">
    <div class="row">
        <div class="col-md-8 main-content">
                <article>
                    <h3><a href="https://codeinphp.github.io/post/codeigniter-tip-accessing-codeigniter-instance-outside">CodeIgniter Tip: Accessing CodeIgniter Instance Outside</a></h3>
                    <span class="glyphicon glyphicon-user"></span> Sarfraz Ahmed
                    &nbsp;&nbsp;
                    <span class="glyphicon glyphicon-time"></span> April 26, 2015 02:17 AM
                
                        <hr>
                        <p class="post-content"><p>Sometimes you need to access CodeIgniter application instance completely outside of it, may be in Ajax request or an script which is not part of your main CI application. To do so, you can do this:</p>
<pre><code>// file: CI.php
ob_start();
require_once 'index.php'; // adjust path accordingly
ob_get_clean();
return $CI;</code></pre>
<p>Here we are including <code>index.php</code> file of main CI application. We are using buffering functions here so we don't see actual CI application page and finally we we <code>return</code> the <code>$CI</code> instance so that in any page where we need CI instance, we can simply include this file there. So to use it in some other script, you would simply include above file there:</p>
<pre><code>$CI = require_once 'CI.php';
echo $CI-&gt;config-&gt;item('base_url'); // test CI instance</code></pre>
<p>That should work for the most cases.</p>
<p>I happen to need CI instance in a cli/console application but above method didn't do the trick for me in console app. So here is another very very hacky way of getting instance of CI in a console app that I was able to come up with after analyzing CodeIgniter code:</p>
<pre><code>// Hacky Way of Accessing CI Instance Outside

error_reporting(1);

$environment = 'development';

$system_path = 'system';

$application_folder = 'application';

if (realpath($system_path) !== false) {
    $system_path = realpath($system_path) . '/';
}

$system_path = rtrim($system_path, '/') . '/';

define('BASEPATH', str_replace("\\", "/", $system_path));
define('APPPATH', $application_folder . '/');
define('EXT', '.php');
define('ENVIRONMENT', $environment ? $environment : 'development');

require(BASEPATH .'core/Common.php');

if (file_exists(APPPATH.'config/'.ENVIRONMENT.'/constants.php')) {
    require(APPPATH.'config/'.ENVIRONMENT.'/constants.php');
} else {
    require(APPPATH.'config/constants.php');
}

$GLOBALS['CFG'] =&amp; load_class('Config', 'core');
$GLOBALS['UNI'] =&amp; load_class('Utf8', 'core');

if (file_exists($basepath.'core/Security.php')) {
  $GLOBALS['SEC'] =&amp; load_class('Security', 'core');
}

load_class('Loader', 'core');
load_class('Router', 'core');
load_class('Input', 'core');
load_class('Lang', 'core');

require(BASEPATH . 'core/Controller.php');

function &amp;get_instance() {
    return CI_Controller::get_instance();
}

$class = 'CI_Controller';
$instance = new $class();

return $instance;</code></pre>
<p>As said above, this is extremely hacky way and may or may not work in all cases and you would also need to adjust paths in above code and/or load more libraries/helpers/etc you need by modifying it.</p></p>
                        <br/>
                
                        <div class="post-info">
                                <span class="glyphicon glyphicon-folder-open"></span> &nbsp;
                                <a href="https://codeinphp.github.io/category/php">PHP</a>
                                &nbsp;&nbsp;
                
                            <span class="glyphicon glyphicon-bookmark"></span>
                
                                <a href="https://codeinphp.github.io/tag/codeigniter">codeigniter</a>&nbsp;&nbsp;
                                <a href="https://codeinphp.github.io/tag/php">php</a>&nbsp;&nbsp;
                                <a href="https://codeinphp.github.io/tag/tip">tip</a>&nbsp;&nbsp;
                        </div>
                
                    <hr>
                </article>

            <div class="text-center clearfix">
                <div class="col-sm-4 col-md-4">
                    &nbsp;
                </div>
                <div class="col-sm-4 col-md-4">
                    <a class="btn btn-primary" href="https://codeinphp.github.io/posts.html"><i class="fa fa-navicon"></i> View All
                        Post</a>
                </div>
                <div class="col-sm-4 col-md-4">
                    <a class="nextpost btn btn-primary"><i class="fa fa-chevron-circle-right"></i> Next Post</a>
                </div>
            </div>

        </div>

        <div class="sidebar col-md-4">
        
            <!-- Follow Panel -->
                <div class="panel panel-primary text-center">
                    <div class="panel-heading">
                        <strong>Follow Me</strong>
                    </div>
        
                    <div class="panel-body">
                        <a target="_blank" href="https://codeinphp.github.io/rss.xml" class="btn btn-social-icon btn-outline"><i class="fa fa-rss"></i></a>
        
                            <a target="_blank" href="https://twitter.com/sarfraznawaz" class="btn btn-social-icon btn-twitter"><i class="fa fa-twitter"></i></a>
                            <a target="_blank" href="https://www.linkedin.com/profile/view?id=48808377" class="btn btn-social-icon btn-linkedin"><i class="fa fa-linkedin"></i></a>
                            <a target="_blank" href="https://github.com/sarfraznawaz2005" class="btn btn-social-icon btn-github"><i class="fa fa-github"></i></a>
                    </div>
                </div>
        
            <!-- Custom Values from Settings page -->
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <strong>On Stackoverflow</strong>
                    </div>
                    <a href="http://stackoverflow.com/users/139459/sarfraz"> <img src="http://stackoverflow.com/users/flair/139459.png?theme=clean" width="355" height="100" alt="Sarfraz at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="Sarfraz at Stack Overflow, Q&amp;A for professional and enthusiast programmers" class="img-responsive"> </a>
                </div>
        
            <!-- Latest Posts -->
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <strong>Latest Posts</strong>
                </div>
        
                <ul class="list-group">
                        <li class="list-group-item"><a href="https://codeinphp.github.io/post/codeigniter-tip-accessing-codeigniter-instance-outside">CodeIgniter Tip: Accessing CodeIgniter Instance Outside</a></li>
                        <li class="list-group-item"><a href="https://codeinphp.github.io/post/sharing-functionality-using-traits-in-php">Sharing Functionality Using Traits in PHP</a></li>
                        <li class="list-group-item"><a href="https://codeinphp.github.io/post/late-static-binding-in-php">Late Static Binding in PHP</a></li>
                        <li class="list-group-item"><a href="https://codeinphp.github.io/post/closures-php-vs-javascript">Closures - PHP vs Javascript</a></li>
                        <li class="list-group-item"><a href="https://codeinphp.github.io/post/database-migrations-in-codeigniter">Database Migrations in CodeIgniter</a></li>
                </ul>
            </div>
        
            <!-- Categories -->
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <strong>Categories</strong>
                </div>
        
                <ul class="list-group">
                        <li class="list-group-item"><a href="https://codeinphp.github.io/category/blog">Blog</a></li>
                        <li class="list-group-item"><a href="https://codeinphp.github.io/category/bloggercms">BloggerCMS</a></li>
                        <li class="list-group-item"><a href="https://codeinphp.github.io/category/javascript">Javascript</a></li>
                        <li class="list-group-item"><a href="https://codeinphp.github.io/category/php">PHP</a></li>
                        <li class="list-group-item"><a href="https://codeinphp.github.io/category/sql">SQL</a></li>
                </ul>
            </div>
        
            <!-- Archives -->
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <strong>Archives</strong>
                    </div>
        
                    <ul class="archives list-group"><li class="list-group-item archive_link"><a href="https://codeinphp.github.io/archive/april-2015">April 2015</a></li></ul>
                </div>
        
            <!-- Tags -->
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <strong>Tags Cloud</strong>
                    </div>
        
                    <div class="panel-body">
                        <ul class="list-inline">
                            <a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/abstract" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">abstract</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/app" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">app</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/bind" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">bind</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/blog" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">blog</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/bloggercms" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">bloggercms</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/browser" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">browser</a>
<a style="font-size: 13px" class="tag_cloud" href="https://codeinphp.github.io/tag/closure" title="2 total posts" data-original-title="3 total posts" data-toggle="tooltip">closure</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/cms" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">cms</a>
<a style="font-size: 17px" class="tag_cloud" href="https://codeinphp.github.io/tag/codeigniter" title="6 total posts" data-original-title="7 total posts" data-toggle="tooltip">codeigniter</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/console" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">console</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/controller" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">controller</a>
<a style="font-size: 13px" class="tag_cloud" href="https://codeinphp.github.io/tag/database" title="2 total posts" data-original-title="3 total posts" data-toggle="tooltip">database</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/datamapper" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">datamapper</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/dependency" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">dependency</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/development" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">development</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/devtools" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">devtools</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/drive" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">drive</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/function" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">function</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/git" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">git</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/googledrive" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">googledrive</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/injection" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">injection</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/interface" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">interface</a>
<a style="font-size: 14px" class="tag_cloud" href="https://codeinphp.github.io/tag/javascript" title="3 total posts" data-original-title="4 total posts" data-toggle="tooltip">javascript</a>
<a style="font-size: 13px" class="tag_cloud" href="https://codeinphp.github.io/tag/lambda" title="2 total posts" data-original-title="3 total posts" data-toggle="tooltip">lambda</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/migration" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">migration</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/mysql" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">mysql</a>
<a style="font-size: 14px" class="tag_cloud" href="https://codeinphp.github.io/tag/oop" title="3 total posts" data-original-title="4 total posts" data-toggle="tooltip">oop</a>
<a style="font-size: 30px" class="tag_cloud" href="https://codeinphp.github.io/tag/php" title="17 total posts" data-original-title="18 total posts" data-toggle="tooltip">php</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/phpexecute" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">phpexecute</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/runner" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">runner</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/scope" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">scope</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/sql" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">sql</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/sqlite" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">sqlite</a>
<a style="font-size: 13px" class="tag_cloud" href="https://codeinphp.github.io/tag/static" title="2 total posts" data-original-title="3 total posts" data-toggle="tooltip">static</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/tester" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">tester</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/tip" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">tip</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/todo" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">todo</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/trait" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">trait</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/visual" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">visual</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/wamp" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">wamp</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/welcome" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">welcome</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/workflow" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">workflow</a>
<a style="font-size: 12px" class="tag_cloud" href="https://codeinphp.github.io/tag/xampp" title="1 total posts" data-original-title="2 total posts" data-toggle="tooltip">xampp</a>

                        </ul>
                    </div>
                </div>
            </div>
    </div>
</div>

<!-- Footer -->
<footer>
    <div class="container">
        <hr/>
        <p class="text-center">Published by <strong><a target="_blank" href="https://github.com/sarfraznawaz2005/BloggerCMS">BloggerCMS</a></strong></p>
    </div>
</footer>

<!-- Jquery and Bootstrap Script files -->
<script src="https://codeinphp.github.io/js/jquery-2.0.3.min.js"></script>
<script src="https://codeinphp.github.io/js/plugins/bootstrap-3.0.3/js/bootstrap.min.js"></script>
<script src="https://codeinphp.github.io/js/plugins/highlight/highlight.pack.js"></script>
<script src="https://codeinphp.github.io/js/plugins/lightbox/ekko-lightbox.min.js"></script>

<script>
    var __blogURL = 'https://codeinphp.github.io';
</script>

<script src="https://codeinphp.github.io/js/blog.js"></script>
<script src="https://codeinphp.github.io/js/search.js"></script>

<!-- google analytics -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-61657332-1', 'auto');
    ga('send', 'pageview');
</script>


</body>
</html>
<!-- for pagination -->
<script>
    $(function () {

        ///////////////////////////////////////////////////
        // class/id/selector of prev link
        var $nextPostSelector = $('.nextpost');
        ///////////////////////////////////////////////////

        $.ajax({
            url: __blogURL + "/data/blog.json",
            type: "GET",
            dataType: "json",
            success: function (data) {
                if (data.posts !== undefined && data.posts !== null) {
                    var nextPost = data.posts[1];

                    if (nextPost === undefined || nextPost === null) {
                        // hide previous link if blog has only one post
                        $nextPostSelector.hide();
                    }
                    else {
                        $nextPostSelector.attr('href', __blogURL + '/post/' + nextPost.slug);
                    }
                }
            },
            error: function (e) {
                $nextPostSelector.hide();
            }
        });

    });
</script>